(this.webpackJsonpsplendor=this.webpackJsonpsplendor||[]).push([[0],{20:function(e){e.exports=JSON.parse('[{"level":1,"gem":"diamond","points":1,"cost":{"emerald":4}},{"level":1,"gem":"diamond","points":0,"cost":{"sapphire":3}},{"level":1,"gem":"diamond","points":0,"cost":{"ruby":2,"opal":1}},{"level":1,"gem":"diamond","points":0,"cost":{"sapphire":2,"opal":2}},{"level":1,"gem":"diamond","points":0,"cost":{"sapphire":1,"emerald":1,"ruby":1,"opal":1}},{"level":1,"gem":"diamond","points":0,"cost":{"sapphire":1,"emerald":2,"ruby":1,"opal":1}},{"level":1,"gem":"diamond","points":0,"cost":{"sapphire":2,"emerald":2,"opal":1}},{"level":1,"gem":"diamond","points":0,"cost":{"diamond":3,"sapphire":1,"opal":1}},{"level":1,"gem":"sapphire","points":1,"cost":{"ruby":4}},{"level":1,"gem":"sapphire","points":0,"cost":{"opal":3}},{"level":1,"gem":"sapphire","points":0,"cost":{"opal":2,"diamond":1}},{"level":1,"gem":"sapphire","points":0,"cost":{"emerald":2,"opal":2}},{"level":1,"gem":"sapphire","points":0,"cost":{"diamond":1,"emerald":1,"ruby":1,"opal":1}},{"level":1,"gem":"sapphire","points":0,"cost":{"diamond":1,"ruby":2,"emerald":1,"opal":1}},{"level":1,"gem":"sapphire","points":0,"cost":{"ruby":2,"emerald":2,"diamond":1}},{"level":1,"gem":"sapphire","points":0,"cost":{"emerald":3,"sapphire":1,"ruby":1}},{"level":1,"gem":"emerald","points":1,"cost":{"opal":4}},{"level":1,"gem":"emerald","points":0,"cost":{"ruby":3}},{"level":1,"gem":"emerald","points":0,"cost":{"diamond":2,"sapphire":1}},{"level":1,"gem":"emerald","points":0,"cost":{"sapphire":2,"ruby":2}},{"level":1,"gem":"emerald","points":0,"cost":{"diamond":1,"sapphire":1,"ruby":1,"opal":1}},{"level":1,"gem":"emerald","points":0,"cost":{"diamond":1,"opal":2,"sapphire":1,"ruby":1}},{"level":1,"gem":"emerald","points":0,"cost":{"ruby":2,"opal":2,"sapphire":1}},{"level":1,"gem":"emerald","points":0,"cost":{"sapphire":3,"diamond":1,"emerald":1}},{"level":1,"gem":"ruby","points":1,"cost":{"diamond":4}},{"level":1,"gem":"ruby","points":0,"cost":{"diamond":3}},{"level":1,"gem":"ruby","points":0,"cost":{"sapphire":2,"emerald":1}},{"level":1,"gem":"ruby","points":0,"cost":{"diamond":2,"ruby":2}},{"level":1,"gem":"ruby","points":0,"cost":{"diamond":1,"sapphire":1,"opal":1,"emerald":1}},{"level":1,"gem":"ruby","points":0,"cost":{"sapphire":1,"diamond":2,"emerald":1,"opal":1}},{"level":1,"gem":"ruby","points":0,"cost":{"diamond":2,"opal":2,"emerald":1}},{"level":1,"gem":"ruby","points":0,"cost":{"opal":3,"diamond":1,"ruby":1}},{"level":1,"gem":"opal","points":1,"cost":{"sapphire":4}},{"level":1,"gem":"opal","points":0,"cost":{"emerald":3}},{"level":1,"gem":"opal","points":0,"cost":{"emerald":2,"ruby":1}},{"level":1,"gem":"opal","points":0,"cost":{"emerald":2,"diamond":2}},{"level":1,"gem":"opal","points":0,"cost":{"diamond":1,"emerald":1,"sapphire":1,"ruby":1}},{"level":1,"gem":"opal","points":0,"cost":{"diamond":1,"sapphire":2,"emerald":1,"ruby":1}},{"level":1,"gem":"opal","points":0,"cost":{"diamond":2,"sapphire":2,"ruby":1}},{"level":1,"gem":"opal","points":0,"cost":{"ruby":3,"emerald":1,"opal":1}},{"level":2,"gem":"diamond","points":3,"cost":{"diamond":6}},{"level":2,"gem":"diamond","points":2,"cost":{"ruby":5}},{"level":2,"gem":"diamond","points":2,"cost":{"ruby":5,"opal":3}},{"level":2,"gem":"diamond","points":2,"cost":{"emerald":1,"opal":2,"ruby":4}},{"level":2,"gem":"diamond","points":1,"cost":{"emerald":3,"ruby":2,"opal":2}},{"level":2,"gem":"diamond","points":1,"cost":{"diamond":2,"sapphire":3,"ruby":3}},{"level":2,"gem":"sapphire","points":3,"cost":{"sapphire":6}},{"level":2,"gem":"sapphire","points":2,"cost":{"sapphire":5}},{"level":2,"gem":"sapphire","points":2,"cost":{"diamond":5,"sapphire":3}},{"level":2,"gem":"sapphire","points":2,"cost":{"ruby":1,"diamond":2,"opal":4}},{"level":2,"gem":"sapphire","points":1,"cost":{"ruby":3,"emerald":2,"sapphire":2}},{"level":2,"gem":"sapphire","points":1,"cost":{"sapphire":2,"emerald":3,"opal":3}},{"level":2,"gem":"emerald","points":3,"cost":{"emerald":6}},{"level":2,"gem":"emerald","points":2,"cost":{"emerald":5}},{"level":2,"gem":"emerald","points":2,"cost":{"sapphire":5,"emerald":3}},{"level":2,"gem":"emerald","points":2,"cost":{"opal":1,"sapphire":2,"diamond":4}},{"level":2,"gem":"emerald","points":1,"cost":{"sapphire":3,"diamond":2,"opal":2}},{"level":2,"gem":"emerald","points":1,"cost":{"emerald":2,"diamond":3,"ruby":3}},{"level":2,"gem":"ruby","points":3,"cost":{"ruby":6}},{"level":2,"gem":"ruby","points":2,"cost":{"opal":5}},{"level":2,"gem":"ruby","points":2,"cost":{"opal":5,"diamond":3}},{"level":2,"gem":"ruby","points":2,"cost":{"diamond":1,"emerald":2,"sapphire":4}},{"level":2,"gem":"ruby","points":1,"cost":{"opal":3,"diamond":2,"ruby":2}},{"level":2,"gem":"ruby","points":1,"cost":{"ruby":2,"sapphire":3,"opal":3}},{"level":2,"gem":"opal","points":3,"cost":{"opal":6}},{"level":2,"gem":"opal","points":2,"cost":{"diamond":5}},{"level":2,"gem":"opal","points":2,"cost":{"emerald":5,"ruby":3}},{"level":2,"gem":"opal","points":2,"cost":{"sapphire":1,"ruby":2,"emerald":4}},{"level":2,"gem":"opal","points":1,"cost":{"diamond":3,"sapphire":2,"emerald":2}},{"level":2,"gem":"opal","points":1,"cost":{"opal":2,"diamond":3,"emerald":3}},{"level":3,"gem":"diamond","points":5,"cost":{"opal":7,"diamond":3}},{"level":3,"gem":"diamond","points":4,"cost":{"opal":7}},{"level":3,"gem":"diamond","points":4,"cost":{"opal":6,"diamond":3,"ruby":3}},{"level":3,"gem":"diamond","points":3,"cost":{"ruby":5,"sapphire":3,"emerald":3,"opal":3}},{"level":3,"gem":"sapphire","points":5,"cost":{"diamond":7,"sapphire":3}},{"level":3,"gem":"sapphire","points":4,"cost":{"diamond":7}},{"level":3,"gem":"sapphire","points":4,"cost":{"diamond":6,"sapphire":3,"opal":3}},{"level":3,"gem":"sapphire","points":3,"cost":{"opal":5,"diamond":3,"emerald":3,"ruby":3}},{"level":3,"gem":"emerald","points":5,"cost":{"sapphire":7,"emerald":3}},{"level":3,"gem":"emerald","points":4,"cost":{"sapphire":7}},{"level":3,"gem":"emerald","points":4,"cost":{"sapphire":6,"diamond":3,"emerald":3}},{"level":3,"gem":"emerald","points":3,"cost":{"diamond":5,"sapphire":3,"ruby":3,"opal":3}},{"level":3,"gem":"ruby","points":5,"cost":{"emerald":7,"ruby":3}},{"level":3,"gem":"ruby","points":4,"cost":{"emerald":7}},{"level":3,"gem":"ruby","points":4,"cost":{"emerald":6,"sapphire":3,"ruby":3}},{"level":3,"gem":"ruby","points":3,"cost":{"sapphire":5,"diamond":3,"emerald":3,"opal":3}},{"level":3,"gem":"opal","points":5,"cost":{"ruby":7,"opal":3}},{"level":3,"gem":"opal","points":4,"cost":{"ruby":7}},{"level":3,"gem":"opal","points":4,"cost":{"ruby":6,"emerald":3,"opal":3}},{"level":3,"gem":"opal","points":3,"cost":{"emerald":5,"diamond":3,"sapphire":3,"ruby":3}}]')},23:function(e){e.exports=JSON.parse('[{"cost":{"emerald":3,"sapphire":3,"diamond":3}},{"cost":{"opal":3,"ruby":3,"diamond":3}},{"cost":{"opal":3,"sapphire":3,"diamond":3}},{"cost":{"opal":3,"ruby":3,"emerald":3}},{"cost":{"emerald":3,"sapphire":3,"ruby":3}},{"cost":{"sapphire":4,"emerald":4}},{"cost":{"opal":4,"diamond":4}},{"cost":{"opal":4,"ruby":4}},{"cost":{"sapphire":4,"diamond":4}},{"cost":{"ruby":4,"emerald":4}}]')},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var i=a(1),s=a.n(i),r=a(21),o=a.n(r),l=a(2),n=a(9),c=a(0),p=function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Home!"}),Object(c.jsx)(n.b,{to:"/about",children:"About"})]})},d=function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"About!"}),Object(c.jsx)(n.b,{to:"/",children:"Home"})]})},m=a(10),h=function(e){var t=Object(i.useState)(1),a=Object(m.a)(t,2),s=a[0],r=a[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Game Home!"}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),s>1&&r(s-1)},children:"<"}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),s<4&&r(s+1)},children:">"}),Object(c.jsxs)("p",{children:["Players: ",s]}),Object(c.jsx)(n.b,{to:"/game/"+s,children:"Start Game!"})]})},u=a(11),b=a(24),v=a(4),g=a(7),y=a(20),j=a(23),f=a(25),O=function(){function e(t){Object(v.a)(this,e),this.level=t.level,this.gem=t.gem,this.points=t.points,this.cost=this.compute_cost(t.cost)}return Object(g.a)(e,[{key:"compute_cost",value:function(e){if(!e)return{diamond:0,sapphire:0,emerald:0,ruby:0,opal:0};var t={};return t.diamond=e.diamond?e.diamond:0,t.sapphire=e.sapphire?e.sapphire:0,t.emerald=e.emerald?e.emerald:0,t.ruby=e.ruby?e.ruby:0,t.opal=e.opal?e.opal:0,t}},{key:"with_discount",value:function(e){var t=Object(f.a)({},this.cost);for(var a in e)t[a]=this.cost[a]-e[a],t[a]<0&&(t[a]=0);return t}}]),e}(),x=O;function k(e){return new O(e)}var C=function e(t){Object(v.a)(this,e),this.cost=t.cost};function _(e){return new C(e)}var w={cards:{all:function(){return y.map(k)},byLevel:function(e){return y.filter((function(t){return t.level===e})).map(k)}},nobles:{all:function(){return j.map(_)}}},A=function(){function e(){Object(v.a)(this,e),this._cards=[],this.discount={diamond:0,sapphire:0,emerald:0,ruby:0,opal:0}}return Object(g.a)(e,[{key:"add_card",value:function(e){e instanceof x?(this._cards.push(e),this.discount[e.gem]+=1):(this._cards.push(new x(e)),this.discount[e.gem]+=1)}},{key:"points",get:function(){return this._cards.reduce((function(e,t){return e+t.points}),0)}},{key:"get_discount",value:function(e){return this.discount[e]}},{key:"check_noble",value:function(e){for(var t in e.cost)if(this.discount[t]<e.cost[t])return!1;return!0}}]),e}(),P=function(){function e(t){Object(v.a)(this,e),this.name=t,this.chips={diamond:0,sapphire:0,emerald:0,ruby:0,opal:0,gold:0},this.hand=new A,this.nobles={points:0}}return Object(g.a)(e,[{key:"points",get:function(){return this.hand.points+this.nobles.points}},{key:"canBuy",value:function(e){for(var t=e.with_discount(this.hand.discount),a=0,i=["diamond","sapphire","emerald","ruby","opal"];a<i.length;a++){var s=i[a];t[s]=t[s]-this.chips[s],t[s]<0&&(t[s]=0)}var r=0;for(var o in t)r+=t[o];return(r-=this.chips.gold)>=0}}]),e}(),N={2:{diamond:4,sapphire:4,emerald:4,ruby:4,opal:4,gold:5},3:{diamond:5,sapphire:5,emerald:5,ruby:5,opal:5,gold:5},4:{diamond:7,sapphire:7,emerald:7,ruby:7,opal:7,gold:5},default:{diamond:1,sapphire:1,emerald:1,ruby:1,opal:1,gold:1}},T=function(){function e(t){Object(v.a)(this,e),this.chips=N[t]||N.default}return Object(g.a)(e,[{key:"getChips",value:function(e){return this.chips[e]}},{key:"canTakeChip",value:function(e){return this.chips[e]>0}},{key:"canTakeTwoChips",value:function(e){return this.chips[e]>=4}},{key:"takeChip",value:function(e){return this.chips[e]-=1,this.chips[e]}},{key:"takeTwoChips",value:function(e){return this.chips[e]-=2,this.chips[e]}},{key:"returnChip",value:function(e){return this.chips[e]+=1,this.chips[e]}}]),e}(),D=function(){function e(t){Object(v.a)(this,e),this.pool=new T(t),this.decks={1:[],2:[],3:[]},this.cards={1:[],2:[],3:[]}}return Object(g.a)(e,[{key:"init",value:function(){return this.initDecks(),this.initCards(),this}},{key:"initDecks",value:function(){for(var e=0,t=[1,2,3];e<t.length;e++){var a=t[e];this.decks[a]=w.cards.byLevel(a)}}},{key:"initCards",value:function(){for(var e=0,t=[1,2,3];e<t.length;e++){var a,i=t[e],s=Object(u.a)(Array(4));try{for(s.s();!(a=s.n()).done;){a.value;this.flipcard(i)}}catch(r){s.e(r)}finally{s.f()}}}},{key:"flipcard",value:function(e){var t,a=(t=this.decks[e])[Math.floor(Math.random()*t.length)];return this.decks[e]=this.decks[e].filter((function(e){return e!=a})),this.cards[e].push(a),a}},{key:"buycard",value:function(e,t){var a=this.cards[e].indexOf(t);return this.cards[e].pop(a),this.flipcard(e),t}}]),e}();var S=function(){function e(t){Object(v.a)(this,e),this._activeChips=[],this.players=[];var a,i=Object(u.a)(t);try{for(i.s();!(a=i.n()).done;){var s=a.value;this.players.push(new P(s))}}catch(r){i.e(r)}finally{i.f()}!function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[a],e[a]=i}}(this.players),this.table=new D(this.players.length)}return Object(g.a)(e,[{key:"init",value:function(){return this.table.init(),this.currentPlayer=0,this}},{key:"getCurrentPlayer",value:function(){return this.players[this.currentPlayer]}},{key:"nextTurn",value:function(){this.currentPlayer+=1,this.currentPlayer==this.players.length&&(this.currentPlayer=0)}},{key:"getActiveChips",value:function(){return this._activeChips}},{key:"clearActiveChips",value:function(){this._activeChips=[]}},{key:"addActiveChip",value:function(e){this._activeChips.push(e)}},{key:"removeActiveChip",value:function(e){var t=this._activeChips.indexOf(e);this._activeChips.pop(t)}}]),e}();S.Card=x;var M=S,B=function(e){var t=e.card,a=[];for(var i in t.cost)a.push(Object(c.jsx)("span",{className:"card-cost card-cost-".concat(i),children:t.cost[i]}));var s=e.player.canBuy(t);return Object(c.jsxs)("div",{className:"card gem-".concat(t.gem," level").concat(t.level),children:[Object(c.jsx)("span",{className:"card-points",children:t.points}),Object(c.jsx)("div",{className:"card-cost-div",children:a}),Object(c.jsx)("button",{className:"card-btn",onClick:function(e){e.preventDefault(),console.log("Bought: "+t)},disabled:s})]})},J=function(e){var t,a=e.cards,i=[],s=Object(u.a)(a);try{for(s.s();!(t=s.n()).done;){var r=t.value;i.push(Object(c.jsx)("td",{children:Object(c.jsx)(B,{card:r,player:e.game.getCurrentPlayer()})}))}}catch(o){s.e(o)}finally{s.f()}return Object(c.jsx)("tr",{class:"cardlist",children:i})},H=function(e){var t=e.game.table.pool,a=(e.game.getCurrentPlayer(),e.mode),s=e.extraDisabled,r=Object(i.useState)(t.getChips(e.gem)),o=Object(m.a)(r,2);o[0],o[1];return Object(c.jsx)("tr",{children:Object(c.jsx)("div",{className:"chippool",children:Object(c.jsx)("button",{className:"chippool-btn "+e.gem+"-pool "+(e.isActive(e.gem)?"chippool-active":"")+" ",onClick:function(t){t.preventDefault(),!1===e.isActive(e.gem)?e.add(e.gem):e.remove(e.gem)},disabled:!!s(e.gem)||(2!==a||!t.canTakeTwoChips(e.gem))&&(1!==a||!t.canTakeChip(e.gem)),children:t.getChips(e.gem)})})})};a(39);var G={"/about":d,"/home":p,"/game/:players":function(e){for(var t=parseInt(Object(l.f)().players),a=[],s=0,r=Object(b.a)(Array(t).keys());s<r.length;s++){var o=r[s];a.push("Player "+(o+1))}for(var n=Object(i.useState)(1),p=Object(m.a)(n,2),d=p[0],h=p[1],v=Object(i.useState)(new M(a).init()),g=Object(m.a)(v,2),y=g[0],j=(g[1],Object(i.useState)([])),f=Object(m.a)(j,2),O=f[0],x=f[1],k=function(){var e=Object(i.useState)(!0),t=Object(m.a)(e,2),a=t[0],s=t[1];return function(){s(!a)}}(),C=function(e){y.addActiveChip(e),x(y.getActiveChips()),k()},_=function(e){y.removeActiveChip(e),x(y.getActiveChips()),k()},w=function(e){return O.includes(e)},A=function(e){if(1===d){if(3===O.length&&!O.includes(e))return!0;if("gold"===O[0]&&"gold"!==e)return!0;if(O.length>0&&"gold"===e&&"gold"!==O[0])return!0}if(2===d){if("gold"===e)return!0;if(1===O.length&&O[0]!==e)return!0}return!1},P=[],N=0,T=["diamond","sapphire","emerald","ruby","opal","gold"];N<T.length;N++){var D=T[N];P.push(Object(c.jsx)(H,{mode:d,gem:D,game:y,add:C,remove:_,extraDisabled:A,isActive:w}))}for(var S=[],B=0,G=["diamond","sapphire","emerald","ruby","opal","gold"];B<G.length;B++){var I=G[B];S.push(Object(c.jsx)("td",{children:Object(c.jsx)("div",{className:"chippool",children:Object(c.jsx)("button",{className:"chippool-btn "+I+"-pool",children:y.getCurrentPlayer().chips[I]})})}))}for(var L=[],E=0,q=["diamond","sapphire","emerald","ruby","opal"];E<q.length;E++){var z=q[E];L.push(Object(c.jsx)("td",{children:Object(c.jsx)("div",{className:"card gem-".concat(z),children:Object(c.jsx)("span",{className:"card-points",children:y.getCurrentPlayer().hand.discount[z]})})}))}for(var F=0,K=["diamond","sapphire","emerald","ruby","opal","gold"];F<K.length;F++);return Object(c.jsxs)("div",{children:[Object(c.jsxs)("h1",{children:[y.getCurrentPlayer().name,": ",y.getCurrentPlayer().points," points"]}),Object(c.jsx)("table",{id:"table",children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsxs)("table",{id:"cards-table",children:[Object(c.jsx)(J,{cards:y.table.cards[3],game:y}),Object(c.jsx)(J,{cards:y.table.cards[2],game:y}),Object(c.jsx)(J,{cards:y.table.cards[1],game:y})]})}),Object(c.jsx)("td",{children:Object(c.jsxs)("table",{id:"chips-table",children:[Object(c.jsx)("tr",{children:Object(c.jsxs)("button",{id:"mode-btn",onClick:function(e){e.preventDefault(),h(1===d?2:1)},children:["Take ",d]})}),Object(c.jsx)("tr",{children:Object(c.jsx)("button",{id:"take-chips",onClick:function(e){e.preventDefault();var t,a=y.getCurrentPlayer(),i=Object(u.a)(O);try{for(i.s();!(t=i.n()).done;){var s=t.value;1===d?(a.chips[s]+=1,y.table.pool.takeChip(s)):(a.chips[s]+=2,y.table.pool.takeChip(s),y.table.pool.takeChip(s))}}catch(r){i.e(r)}finally{i.f()}!function(){for(var e=0,t=["diamond","sapphire","emerald","ruby","opal"];e<t.length;e++)_(t[e])}(),y.nextTurn(),k()},children:"Take Chips"})}),P]})})]})}),Object(c.jsx)("table",{children:Object(c.jsx)("tr",{children:S})}),Object(c.jsx)("table",{children:Object(c.jsx)("tr",{children:L})})]})},"/game":h,"/":h};var I=function(){var e=[];for(var t in G){var a=G[t];e.push(Object(c.jsx)(l.a,{path:t,children:Object(c.jsx)(a,{})},t))}return Object(c.jsx)(n.a,{basename:"/",children:Object(c.jsx)(l.c,{children:e})})};o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(I,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.ad94f4fd.chunk.js.map