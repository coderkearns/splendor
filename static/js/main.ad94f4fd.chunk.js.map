{"version":3,"sources":["routes/home.jsx","routes/about.jsx","routes/game-home.jsx","logic/card.js","logic/noble.js","logic/data.js","logic/hand.js","logic/player.js","logic/chip-pool.js","logic/table.js","logic/game.js","routes/card.jsx","routes/level.jsx","routes/chip-pool.jsx","routes/game.jsx","routes.js","App.jsx","index.jsx"],"names":["Home","props","to","About","GameHome","useState","players","setPlayers","onClick","e","preventDefault","Card","card","this","level","gem","points","cost","compute_cost","diamond","sapphire","emerald","ruby","opal","newcost","discount","map","Noble","noble","cards","all","cardMapper","byLevel","filter","nobles","nobleMapper","Hand","_cards","push","reduce","total","current","Player","name","chips","gold","hand","newprice","with_discount","total_unpaid","startingChips","2","3","4","default","ChipPool","playercount","Table","pool","decks","1","initDecks","initCards","lvl","data","Array","flipcard","arr","Math","floor","random","length","c","i","indexOf","pop","Game","playerNames","_activeChips","p","array","j","temp","shuffleArray","table","init","currentPlayer","className","isDisabled","player","canBuy","console","log","disabled","Level","cardlist","game","getCurrentPlayer","class","mode","extraDisabled","getChips","isActive","add","remove","canTakeTwoChips","canTakeChip","routes","parseInt","useParams","keys","setMode","activeChips","setActiveChips","refresh","currentRefresh","setRefresh","useRefresh","addActiveChip","getActiveChips","removeActiveChip","includes","pools","playerChips","playerCards","id","chip","takeChip","clearActiveChips","nextTurn","App","Routes","route","ThisRoute","path","basename","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ad94f4fd.chunk.js","sourcesContent":["import React from \"react\"\nimport { Link } from \"react-router-dom\"\n\nconst Home = props => {\n  return (\n    <div>\n      <h1>Home!</h1>\n      <Link to=\"/about\">About</Link>\n    </div>\n  )\n}\n\nexport default Home\n","import React from \"react\"\nimport { Link } from \"react-router-dom\"\n\nconst About = props => {\n  return (\n    <div>\n      <h1>About!</h1>\n      <Link to=\"/\">Home</Link>\n    </div>\n  )\n}\n\nexport default About\n","import React, { useState } from \"react\"\nimport { Link } from \"react-router-dom\"\n\nconst GameHome = props => {\n  let [players, setPlayers] = useState(1)\n\n  let incrementPlayers = (e) => {\n    e.preventDefault()\n    if (players < 4) setPlayers(players + 1)\n  }\n  let decrementPlayers = (e) => {\n    e.preventDefault()\n    if (players > 1) setPlayers(players - 1)\n  }\n\n  return (\n    <div>\n      <h1>Game Home!</h1>\n      <button onClick={decrementPlayers}>{\"<\"}</button>\n      <button onClick={incrementPlayers}>{\">\"}</button>\n      <p>Players: {players}</p>\n      <Link to={\"/game/\" + players}>Start Game!</Link>\n    </div>\n  )\n}\n\nexport default GameHome\n","class Card {\n  constructor(card) {\n    this.level = card.level\n    this.gem = card.gem\n    this.points = card.points\n    this.cost = this.compute_cost(card.cost)\n  }\n\n  compute_cost(cost) {\n    if (!cost) return { diamond: 0, sapphire: 0, emerald: 0, ruby: 0, opal: 0 }\n    let newcost = {}\n    newcost.diamond = cost.diamond ? cost.diamond : 0\n    newcost.sapphire = cost.sapphire ? cost.sapphire : 0\n    newcost.emerald = cost.emerald ? cost.emerald : 0\n    newcost.ruby = cost.ruby ? cost.ruby : 0\n    newcost.opal = cost.opal ? cost.opal : 0\n    return newcost\n  }\n\n  with_discount(discount) {\n    let newcost = { ...this.cost }\n    for (let gem in discount) {\n      newcost[gem] = this.cost[gem] - discount[gem]\n      if (newcost[gem] < 0) newcost[gem] = 0\n    }\n    return newcost\n  }\n}\n\nexport default Card\nexport function map (card) {\n  return new Card(card)\n}\n","\nclass Noble {\n  constructor(noble) {\n    this.cost = noble.cost\n  }\n\n}\n\nexport default Noble\nexport function map(noble) {\n  return new Noble(noble)\n}\n","import cards from \"./cards.json\"\nimport nobles from \"./nobles.json\"\n\nimport Card, {map as cardMapper} from \"./card.js\"\nimport Noble, {map as nobleMapper} from \"./noble.js\"\n\nfunction getCards() {\n  return cards.map(cardMapper)\n}\n\nfunction getLevel(level) {\n  return cards\n    .filter(card => card.level === level)\n    .map(cardMapper)\n}\n\nfunction getNobles() {\n  return nobles.map(nobleMapper)\n}\n\nexport default {\n  cards: { all: getCards, byLevel: getLevel },\n  nobles: { all: getNobles },\n}\n","import Card from \"./card.js\"\n\nclass Hand {\n  constructor() {\n    this._cards = []\n    this.discount = { diamond: 0, sapphire: 0, emerald: 0, ruby: 0, opal: 0 }\n  }\n\n  add_card(card) {\n    if (card instanceof Card) {\n      this._cards.push(card)\n      this.discount[card.gem] += 1\n    } else {\n      this._cards.push(new Card(card))\n      this.discount[card.gem] += 1\n    }\n  }\n\n  get points() {\n    return this._cards.reduce((total, current) => {\n      return total + current.points\n    }, 0)\n  }\n\n  get_discount(gem) {\n    return this.discount[gem]\n  }\n\n  check_noble(noble) {\n    for (let gem in noble.cost) {\n      if (this.discount[gem] < noble.cost[gem]) return false\n    }\n    return true\n  }\n}\n\nexport default Hand\n","import Hand from \"./hand.js\"\n\nclass Player {\n  constructor(name) {\n    this.name = name\n    this.chips = { diamond: 0, sapphire: 0, emerald: 0, ruby: 0, opal: 0, gold: 0 }\n    this.hand = new Hand()\n    this.nobles = {points: 0}\n  }\n\n  get points() {\n    return this.hand.points + this.nobles.points\n  }\n\n  canBuy(card) {\n    let newprice = card.with_discount(this.hand.discount)\n\n    for (let gem of [\"diamond\", \"sapphire\", \"emerald\", \"ruby\", \"opal\"]) {\n      newprice[gem] = newprice[gem] - this.chips[gem]\n      if (newprice[gem] < 0) newprice[gem] = 0\n    }\n\n    let total_unpaid = 0\n    for (let gem in newprice) total_unpaid += newprice[gem]\n    total_unpaid -= this.chips.gold\n\n    return total_unpaid >= 0\n  }\n}\n\nexport default Player\n","const startingChips = {\n  2: { diamond: 4, sapphire: 4, emerald: 4, ruby: 4, opal: 4, gold: 5 },\n  3: { diamond: 5, sapphire: 5, emerald: 5, ruby: 5, opal: 5, gold: 5 },\n  4: { diamond: 7, sapphire: 7, emerald: 7, ruby: 7, opal: 7, gold: 5 },\n  default: { diamond: 1, sapphire: 1, emerald: 1, ruby: 1, opal: 1, gold: 1 }\n}\n\nclass ChipPool {\n  constructor(playercount) {\n    this.chips = startingChips[playercount] || startingChips.default\n  }\n\n  getChips(gem) {\n    return this.chips[gem]\n  }\n\n  canTakeChip(gem) {\n    return this.chips[gem] > 0\n  }\n  canTakeTwoChips(gem) {\n    return this.chips[gem] >= 4\n  }\n\n  takeChip(gem) {\n    this.chips[gem] -= 1\n    return this.chips[gem]\n  }\n  takeTwoChips(gem) {\n    this.chips[gem] -= 2\n    return this.chips[gem]\n  }\n\n  returnChip(gem) {\n    this.chips[gem] += 1\n    return this.chips[gem]\n  }\n}\n\nexport default ChipPool\n","import ChipPool from \"./chip-pool.js\"\nimport data from \"./data.js\"\n\nconst randArr = arr => {\n  return arr[Math.floor(Math.random() * arr.length)]\n}\n\nclass Table {\n  constructor(players) {\n    this.pool = new ChipPool(players)\n    this.decks = { 1: [], 2: [], 3: [] }\n    this.cards = { 1: [], 2: [], 3: [] }\n  }\n\n  init() {\n    this.initDecks()\n    this.initCards()\n    return this\n  }\n  initDecks() {\n    for (let lvl of [1, 2, 3]) {\n      this.decks[lvl] = data.cards.byLevel(lvl)\n    }\n  }\n  initCards() {\n    for (let lvl of [1, 2, 3]) {\n      for (let c of Array(4)) {\n        this.flipcard(lvl)\n      }\n    }\n  }\n\n  flipcard(level) {\n    let card = randArr(this.decks[level])\n    this.decks[level] = this.decks[level].filter(c => c != card)\n    this.cards[level].push(card)\n    return card\n  }\n\n  buycard(level, card) {\n    let i = this.cards[level].indexOf(card)\n    this.cards[level].pop(i)\n    this.flipcard(level)\n    return card\n  }\n}\n\nexport default Table\n","import data from \"./data.js\"\nimport Player from \"./player.js\"\nimport Table from \"./table.js\"\nimport Card from \"./card.js\"\n\n\nfunction shuffleArray(array) {\n  for (let i = array.length - 1; i > 0; i--) {\n    let j = Math.floor(Math.random() * (i + 1))\n    let temp = array[i]\n    array[i] = array[j]\n    array[j] = temp\n  }\n}\n\nclass Game {\n\n  constructor(playerNames) {\n    this._activeChips = []\n    this.players = []\n    for (let p of playerNames) {\n      this.players.push(new Player(p))\n    }\n    shuffleArray(this.players)\n    this.table = new Table(this.players.length)\n  }\n  init() {\n    this.table.init()\n    this.currentPlayer = 0\n    return this\n  }\n\n  getCurrentPlayer() {\n    return this.players[this.currentPlayer]\n  }\n  nextTurn() {\n    //alert(this.currentPlayer)\n    this.currentPlayer += 1\n    if (this.currentPlayer == this.players.length) {\n      this.currentPlayer = 0\n    }\n  }\n\n  getActiveChips() {\n    return this._activeChips\n  }\n  clearActiveChips() {\n    this._activeChips = []\n  }\n  addActiveChip(gem) {\n    this._activeChips.push(gem)\n  }\n  removeActiveChip(gem) {\n    let i = this._activeChips.indexOf(gem)\n    this._activeChips.pop(i)\n  }\n}\n\nGame.Card = Card\nexport default Game\n","import React from \"react\"\n\nconst Card = props => {\n  let card = props.card\n\n  let cost = []\n  for (let c in card.cost) {\n    cost.push(\n      <span className={`card-cost card-cost-${c}`}>{card.cost[c]}</span>\n    )\n  }\n\n  const buycard = e => {\n    e.preventDefault()\n    console.log(\"Bought: \" + card)\n  }\n  let isDisabled = props.player.canBuy(card)\n\n  return (\n    <div className={`card gem-${card.gem} level${card.level}`}>\n      <span className=\"card-points\">{card.points}</span>\n      <div className=\"card-cost-div\">{cost}</div>\n      <button className=\"card-btn\" onClick={buycard} disabled={isDisabled}></button>\n    </div>\n  )\n}\n\nexport default Card\n","import React from 'react';\nimport Card from \"./card\"\n\nconst Level = (props) => {\n  let cards = props.cards\n\n  let cardlist = []\n  for (let card of cards) {\n    cardlist.push(<td><Card card={card} player={props.game.getCurrentPlayer()}/></td>)\n  }\n\n  return (\n    <tr class=\"cardlist\">{cardlist}</tr>\n  )\n}\n\nexport default Level;\n","import React, { useState } from \"react\"\n\nconst ChipPool = props => {\n  let pool = props.game.table.pool\n  let currentPlayer = props.game.getCurrentPlayer()\n  let mode = props.mode\n  let extraDisabled = props.extraDisabled\n\n  let [chipsLeft, setChipsLeft] = useState(pool.getChips(props.gem))\n\n  let onChipClick = e => {\n    e.preventDefault()\n    if (props.isActive(props.gem) === false) {\n      props.add(props.gem)\n    } else {\n      props.remove(props.gem)\n    }\n  }\n\n  let isDisabled = () => {\n    if (extraDisabled(props.gem)) return true\n    if (mode === 2) {\n      if (pool.canTakeTwoChips(props.gem)) {\n        return false\n      }\n    }\n    if (mode === 1) {\n      if (pool.canTakeChip(props.gem)) {\n        return false\n      }\n    }\n    return true\n  }\n\n  return (\n    <tr><div className=\"chippool\">\n      <button\n        className={\n          \"chippool-btn\" + \" \"\n          + props.gem + \"-pool\" + \" \"\n          + (props.isActive(props.gem) ? \"chippool-active\": \"\") + \" \"\n        }\n        onClick={onChipClick}\n        disabled={isDisabled()}>\n        {pool.getChips(props.gem)}\n      </button>\n    </div></tr>\n  )\n}\n\nexport default ChipPool\n","import React, { useState } from \"react\"\nimport { Link, useParams } from \"react-router-dom\"\nimport Game from \"../logic/game\"\nimport Level from \"./level\"\nimport ChipPool from \"./chip-pool\"\n\nimport \"./game-styles.css\"\n\nfunction useRefresh() {\n  let [currentRefresh, setRefresh] = useState(true)\n  return () => {\n    setRefresh(!currentRefresh)\n  }\n}\n\nconst GameComponent = props => {\n  let players = parseInt(useParams().players)\n\n  let playerNames = []\n  for (let i of [...Array(players).keys()]) {\n    playerNames.push(\"Player \" + (i + 1))\n  }\n\n  let [mode, setMode] = useState(1)\n  let [game, setGame] = useState(new Game(playerNames).init())\n  let [activeChips, setActiveChips] = useState([])\n  let refresh = useRefresh()\n\n  const addActiveChip = gem => {\n    game.addActiveChip(gem)\n    setActiveChips(game.getActiveChips())\n    refresh()\n  }\n  const removeActiveChip = gem => {\n    game.removeActiveChip(gem)\n    setActiveChips(game.getActiveChips())\n    refresh()\n  }\n  const clearActiveChips = () => {\n    for (let gem of [\"diamond\", \"sapphire\", \"emerald\", \"ruby\", \"opal\"]) {\n      removeActiveChip(gem)\n    }\n  }\n  const isActive = (gem) => {\n    return activeChips.includes(gem)\n  }\n\n  let takeChips = e => {\n    e.preventDefault()\n    let player = game.getCurrentPlayer()\n    for (let chip of activeChips) {\n      if (mode === 1) {\n        player.chips[chip] += 1\n        game.table.pool.takeChip(chip)\n      } else {\n        player.chips[chip] += 2\n        game.table.pool.takeChip(chip)\n        game.table.pool.takeChip(chip)\n      }\n    }\n    clearActiveChips()\n    game.nextTurn()\n    refresh()\n  }\n\n  const extraDisabled = gem => {\n    if (mode === 1) {\n      if (activeChips.length === 3) {\n        if (!activeChips.includes(gem)) {\n          return true\n        }\n      }\n      if (activeChips[0] === \"gold\") {\n        if (gem !== \"gold\") {\n          return true\n        }\n      }\n      if (activeChips.length > 0) {\n        if (gem === \"gold\" && activeChips[0] !== \"gold\") {\n          return true\n        }\n      }\n    }\n    if (mode === 2) {\n      if (gem === \"gold\") {\n        return true\n      }\n      if (activeChips.length === 1) {\n        if (activeChips[0] !== gem) {\n          return true\n        }\n      }\n    }\n    return false\n  }\n\n  let pools = []\n  for (let pool of [\"diamond\", \"sapphire\", \"emerald\", \"ruby\", \"opal\", \"gold\"]) {\n    pools.push(\n      <ChipPool\n        mode={mode}\n        gem={pool}\n        game={game}\n        add={addActiveChip}\n        remove={removeActiveChip}\n        extraDisabled={extraDisabled}\n        isActive={isActive}\n      />\n    )\n  }\n\n  let playerChips = []\n  for (let pool of [\"diamond\", \"sapphire\", \"emerald\", \"ruby\", \"opal\", \"gold\"]) {\n    playerChips.push(\n      <td>\n        <div className=\"chippool\">\n          <button className={\"chippool-btn \" + pool + \"-pool\"}>\n            {game.getCurrentPlayer().chips[pool]}\n          </button>\n        </div>\n      </td>\n    )\n  }\n\n  let playerCards = []\n  for (let pool of [\"diamond\", \"sapphire\", \"emerald\", \"ruby\", \"opal\"]) {\n    playerCards.push(\n      <td>\n        <div className={`card gem-${pool}`}>\n          <span className=\"card-points\">{game.getCurrentPlayer().hand.discount[pool]}</span>\n        </div>\n      </td>\n    )\n  }\n\n  let playerCardAmounts = []\n  for (let pool of [\"diamond\", \"sapphire\", \"emerald\", \"ruby\", \"opal\", \"gold\"]) {\n  }\n\n  const changeMode = e => {\n    e.preventDefault()\n    if (mode === 1) {\n      setMode(2)\n    } else {\n      setMode(1)\n    }\n  }\n\n  return (\n    <div>\n      <h1>{game.getCurrentPlayer().name}: {game.getCurrentPlayer().points} points</h1>\n      <table id=\"table\">\n        <tr>\n          <td>\n            <table id=\"cards-table\">\n              <Level cards={game.table.cards[3]} game={game} />\n              <Level cards={game.table.cards[2]} game={game} />\n              <Level cards={game.table.cards[1]} game={game} />\n            </table>\n          </td>\n          <td>\n            <table id=\"chips-table\">\n              <tr>\n                <button id=\"mode-btn\" onClick={changeMode}>\n                  Take {mode}\n                </button>\n              </tr>\n              <tr>\n                <button id=\"take-chips\" onClick={takeChips}>\n                  Take Chips\n                </button>\n              </tr>\n              {pools}\n            </table>\n          </td>\n        </tr>\n      </table>\n    <table>\n      <tr>{playerChips}</tr>\n    </table>\n    <table>\n      <tr>{playerCards}</tr>\n    </table>\n    </div>\n  )\n}\n\nexport default GameComponent\n","import Home from \"./routes/home\"\nimport About from \"./routes/about\"\nimport GameHome from \"./routes/game-home\"\nimport Game from \"./routes/game\"\n\nlet routes = {\n  \"/about\": About,\n  \"/home\": Home,\n  \"/game/:players\": Game,\n  \"/game\": GameHome,\n  \"/\": GameHome,\n}\n\nexport default routes\n","import { HashRouter as Router, Switch, Route } from \"react-router-dom\"\n\nimport routes from \"./routes\"\n\nfunction App() {\n  let Routes = []\n  for (let route in routes) {\n    let ThisRoute = routes[route]\n    Routes.push(\n      <Route key={route} path={route}>\n        <ThisRoute />\n      </Route>\n    )\n  }\n\n  return (\n    <Router basename=\"/\">\n      {/* <Nav /> */}\n\n      <Switch>{Routes}</Switch>\n    </Router>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}